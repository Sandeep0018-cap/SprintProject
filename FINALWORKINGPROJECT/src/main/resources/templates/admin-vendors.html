<!doctype html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{fragments :: head('Admin Vendors')}"></head>
<body>
<div th:replace="~{fragments :: nav}"></div>

<div class="container py-4" style="max-width:1000px;">
  <h1 class="h3 section-title mb-3">
    <i class="bi bi-building me-2"></i>Admin: Vendors
  </h1>

  <div th:if="${msg}" class="alert alert-success" th:text="${msg}"></div>
  <div th:if="${err}" class="alert alert-danger" th:text="${err}"></div>

  <!-- Create Vendor -->
  <div class="card mb-4">
    <div class="card-header bg-light">
      <h5 class="mb-0"><i class="bi bi-plus-circle me-2"></i>Add New Vendor</h5>
    </div>
    <div class="card-body">
      <form th:action="@{/admin/vendors}" method="post" class="row g-3">
        <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
        
        <div class="col-md-3">
          <label class="form-label">Vendor Name <span class="text-danger">*</span></label>
          <input class="form-control" name="name" placeholder="e.g., Tech Supplies Ltd" required/>
        </div>
        
        <div class="col-md-3">
          <label class="form-label">Contact Person</label>
          <input class="form-control" name="contactName" placeholder="John Doe"/>
        </div>
        
        <div class="col-md-2">
          <label class="form-label">Phone</label>
          <input class="form-control" name="phone" placeholder="123-456-7890"/>
        </div>
        
        <div class="col-md-3">
          <label class="form-label">Email</label>
          <input class="form-control" name="email" type="email" placeholder="vendor@example.com"/>
        </div>
        
        <div class="col-md-1 d-grid">
          <button class="btn btn-primary" type="submit" style="margin-top: 32px;">
            <i class="bi bi-plus me-1"></i>Add
          </button>
        </div>
      </form>
    </div>
  </div>

  <!-- List Vendors -->
  <div class="card">
    <div class="card-header bg-light">
      <h5 class="mb-0"><i class="bi bi-list me-2"></i>Vendor List</h5>
    </div>
    <div class="table-responsive">
      <table class="table table-hover align-middle mb-0">
        <thead class="table-light">
          <tr>
            <th>ID</th>
            <th>Vendor Name</th>
            <th>Contact Person</th>
            <th>Phone</th>
            <th>Email</th>
            <th class="text-end">Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr th:each="v : ${vendors}">
            <td class="small text-muted" th:text="${v.vendorId}">1</td>
            <td class="fw-semibold" th:text="${v.name}">Vendor Name</td>
            <td th:text="${v.contactName ?: '-'}">Contact</td>
            <td th:text="${v.phone ?: '-'}">Phone</td>
            <td th:text="${v.email ?: '-'}">Email</td>
            <td class="text-end">
              <!-- Delete -->
              <form th:action="@{/admin/vendors/{id}/delete(id=${v.vendorId})}"
                    method="post" class="d-inline">
                <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
                <button class="btn btn-sm btn-outline-danger" type="submit"
                        onclick="return confirm('Delete vendor? This will fail if linked to products.')">
                  <i class="bi bi-trash3 me-1"></i>Delete
                </button>
              </form>
            </td>
          </tr>

          <tr th:if="${#lists.isEmpty(vendors)}">
            <td colspan="6" class="text-center text-muted py-3">No vendors found</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

</div>
</body>
</html>