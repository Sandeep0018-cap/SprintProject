<!doctype html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{fragments :: head('Customers')}"></head>
<body class="bg-light">

	<div th:replace="~{fragments :: nav}"></div>

	<div class="container py-5">
		<div class="mb-4">
			<h1 class="h3 fw-bold">
				<i class="bi bi-people me-2 text-primary"></i>Customers
			</h1>
		</div>

		<div class="card border-0 shadow-sm">
			<div class="table-responsive">
				<table class="table table-hover align-middle mb-0">
					<thead class="table-light">
						<tr>
							<th class="ps-4">ID</th>
							<th>Name</th>
							<th>Contact No</th>
							<th>City</th>
							<th>Item Purchased</th>
							<th>Payment Mode</th>
						</tr>
					</thead>
					<tbody>
						<!-- Use 'rows' as defined in your Controller -->
						<tr th:each="c : ${rows}">
							<!-- Matches getCustomer_id() -->
							<td class="ps-4 text-muted" th:text="${c.customer_id}">-</td>

							<!-- Matches getName() -->
							<td class="fw-semibold" th:text="${c.name}">Name</td>

							<!-- Matches getPhone() -->
							<td th:text="${c.phone}">Phone</td>

							<!-- Matches getCity() -->
							<td><span class="badge bg-white text-dark border"
								th:text="${c.city}">City</span></td>

							<!-- Combines Brand and Product Name safely -->
							<td><span
								th:text="${c.lastPurchasedBrand != null ? c.lastPurchasedBrand + ' ' : ''}">Brand</span>
								<span
								th:text="${c.lastPurchasedProductName != null ? c.lastPurchasedProductName : 'N/A'}">Product</span>
							</td>

							<!-- Hardcoded as this field is missing in your Java Entity -->
							<td
								th:text="${c.paymentMode != null ? c.paymentMode.name() : 'Not Available'}"
								class="text-muted small"></td>


							<!-- Displays if the list is empty -->
						<tr th:if="${rows == null || #lists.isEmpty(rows)}">
							<td colspan="6" class="text-center py-5 text-muted"><i
								class="bi bi-database-exclamation fs-2 d-block mb-2"></i> No
								data found in the database.</td>
						</tr>
					</tbody>
				</table>
			</div>
		</div>
	</div>

</body>
</html>
