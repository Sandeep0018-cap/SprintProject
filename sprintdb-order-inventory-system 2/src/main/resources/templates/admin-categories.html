<!doctype html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head th:replace="~{fragments :: head('Admin Categories')}"></head>
<body>
<div th:replace="~{fragments :: nav}"></div>

<div th:replace="~{layout}"></div>
<div class="container py-4" style="max-width:900px;">
  <h1 class="h3 mb-3">Admin: Categories</h1>

  <div class="card shadow-sm mb-3">
    <div class="card-body">
      <form th:action="@{/admin/categories}" method="post" class="row g-2">
        <div class="col-md-9">
          <input class="form-control" name="name" placeholder="New category name" required/>
        </div>
        <div class="col-md-3 d-grid">
          <button class="btn btn-primary" type="submit">Add Category</button>
        </div>
      </form>
    </div>
  </div>

  <div class="card shadow-sm">
    <div class="table-responsive">
      <table class="table mb-0 align-middle">
        <thead>
          <tr><th>ID</th><th>Name</th><th class="text-end">Actions</th></tr>
        </thead>
        <tbody>
          <tr th:each="c : ${categories}">
            <td th:text="${c.id}">1</td>
            <td th:text="${c.name}">Name</td>
            <td class="text-end">
              <form th:action="@{/admin/categories/{id}/delete(id=${c.id})}" method="post" class="d-inline">
                <button class="btn btn-sm btn-outline-danger" type="submit" onclick="return confirm('Delete category?')">Delete</button>
              </form>
              <a class="btn btn-sm btn-outline-secondary" th:href="@{/categories/{id}(id=${c.id})}">View</a>
            </td>
          </tr>
          <tr th:if="${#lists.isEmpty(categories)}">
            <td colspan="3" class="text-center text-muted py-3">No categories</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>

</body>
</html>
